{% extends '@SkaphandrusAppBundle/Resources/views/content_layout.html.twig' %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/skaphandrusapp/js/plugins/peity/jquery.peity.min.js') }}"></script>
    <script>
        $(function() {
            $("span.pie").peity("pie", { fill: ['#1ab394', '#d7d7d7', '#ffffff'] });
            $(".line").peity("line", { fill: '#1ab394', stroke:'#169c81' });
            $(".bar").peity("bar", { fill: ["#1ab394", "#d7d7d7"] });
        });
    </script>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
{% endblock %}

{% block body %}

<div class="wrapper wrapper-content">
    <div class="row animated fadeInRight">
        <!-- Left Column -->
        <div class="col-md-4">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>{{ "page.user.h5.profile_detail"|trans }}</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i class="fa fa-wrench"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li><a href="#">Edit profile</a>
                            </li>
                            <li><a href="#">Submit Photo</a>
                            </li>
                        </ul>
                        <!--<a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>-->
                    </div>
                </div>
                <div>
                    <div class="ibox-content no-padding border-left-right">
                        <img alt="image" class="img-responsive" src="img/profile_big.jpg">
                    </div>
                    <div class="ibox-content profile-content">
                        <h4><strong>{{ user.username }}</strong></h4>
                        <p><i class="fa fa-map-marker"></i> Riviera State 32/106</p>
                        <h5>
                            {{ "page.user.h5.about_me"|trans }}
                        </h5>
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitat.
                        </p>
                        <div class="row m-t-lg">
                            <div class="col-md-4">
                                <span class="bar">5,3,9,6,5,9,7,3,5,2</span>
                                <h5><strong>169</strong> Posts</h5>
                            </div>
                            <div class="col-md-4">
                                <span class="line">5,3,9,6,5,9,7,3,5,2</span>
                                <h5><strong>28</strong> Following</h5>
                            </div>
                            <div class="col-md-4">
                                <span class="bar">5,3,2,-1,-3,-2,2,3,5,2</span>
                                <h5><strong>240</strong> Followers</h5>
                            </div>
                        </div>
                        <div class="user-button">
                            <div class="row">
                                <div class="col-md-6">
                                    <button type="button" class="btn btn-primary btn-sm btn-block"><i class="fa fa-envelope"></i> Send Message</button>
                                </div>
                                <div class="col-md-6">
                                    <button type="button" class="btn btn-default btn-sm btn-block"><i class="fa fa-coffee"></i> Buy a coffee</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Left Column -->
        <!-- Right Column -->
        <div class="col-md-8">
            <div class="ibox float-e-margins">
                <div class="ibox-content">
                    <h1>{{ user.username }}</h1>
                    <!-- Start Panel -->
                    <div class="panel">
                        <div class="panel-heading">
                            <div class="panel-options">
                                <ul class="nav nav-tabs">
                                   {% set tab_id = 0 %}

                                    {% if user.photos|first is not empty  %} 
                                        {% set tab_id = tab_id + 1 %}
                                        {% set tab_photos_id = tab_id %}

                                        <li class="{{tab_id==1?'active'}}">
                                            <a data-toggle="tab" href="#tab-{{tab_id}}">
                                                {{ "page.user.tab.photos"|trans }}
                                            </a>
                                        </li>
                                    {% endif %}
                                    {% if user.spots|first is not empty %} 
                                        {% set tab_id = tab_id + 1 %}
                                        {% set tab_spots_id = tab_id %}

                                        <li class="{{tab_id==1?'active'}}">
                                            <a data-toggle="tab" href="#tab-{{tab_id}}">
                                                {{ "page.user.tab.spots"|trans }}
                                            </a>
                                        </li>
                                    {% endif %}
                                </ul>
                            </div>
                        </div>
                        <div class="panel-body">
                            <div class="tab-content">

                                <!-- Start Photos Tab -->
                                {% if user.photos|first is not empty %}
                                <div id="tab-{{tab_photos_id}}" class="tab-pane {{tab_photos_id==1?'active'}}">
                                    <h3>{{ "page.user.h3.photos"|trans }}</h3>
                                    {{ render(controller('SkaphandrusAppBundle:Default:skGrid', { 'parameters': { 'fosUser': user.id } })) }}
                                </div>
                                {% endif %}
                                <!-- End Photos Tab -->
                                <!-- Start Spots Tab -->
                                {% if user.spots|first is not empty %}
                                <div id="tab-{{tab_spots_id}}" class="tab-pane {{tab_spots_id==1?'active'}}">
                                    <h3>{{ "page.user.h3.spots"|trans }}</h3>
                                    {% for spot in user.spots %}
                                        <p>{{ spot.coordinate }}</p>
                                    {% endfor %}
                                </div>
                                {% endif %}
                                <!-- End Spots Tab -->
                            </div>
                        </div>
                    </div>
                    <!-- End Panel -->
                    <!-- Start Comments -->
                    {% include 'FOSCommentBundle:Thread:async.html.twig' with {'id': 'fosUser-' ~ user.id } %}
                    <!-- End Comments -->
                </div>
            </div>

        </div>
        <!-- End Right Column -->
    </div>
</div>




  {#<h2>{{ "page.user.h2.username"|trans }}: {{ user.username }}</h2>

  {% if user.spots|length %}
    <h3>{{ "page.user.h3.spots"|trans }}</h3>
    {% for spot in user.spots %}
        <p>{{ spot.coordinate }}</p>
    {% endfor %}
  {% endif %}

  <h3>{{ "page.user.h3.photos"|trans }}</h3>
  {{ render(controller('SkaphandrusAppBundle:Default:skGrid', { 'parameters': { 'fosUser': user.id } } )) }}#}

{% endblock %}

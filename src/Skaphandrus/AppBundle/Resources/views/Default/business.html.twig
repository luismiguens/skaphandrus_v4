{% extends '@SkaphandrusAppBundle/Resources/views/content_layout.html.twig' %}

{% block page_title %}{% trans with {'%business%': business.name|title, '%location%': business.address.location, '%country%': business.address.location.region.country} %}page.business.meta_tag.title{% endtrans %}{% endblock %}

{% block page_description %}{% trans with {'%business%': business.name|title, '%location%': business.address.location, '%country%': business.address.location.region.country} %}page.business.meta_tag.description{% endtrans %}{% endblock %}

{% block hreflang %}
    <link rel="alternate" hreflang="pt" href="{{ app.request.getSchemeAndHttpHost() ~ path('business', {'location':business.address.location, 'country':business.address.location.region.country, 'slug':business.name, 'locale': 'pt'}) }}" />
    <link rel="alternate" hreflang="en" href="{{ app.request.getSchemeAndHttpHost() ~ path('business', {'location':business.address.location, 'country':business.address.location.region.country, 'slug':business.name, 'locale': 'en'}) }}" />
{% endblock %}


{% set keywords = business.name %}
{% set keywords = keywords~', '~("meta_tag.keyword.scuba_diving_center"|trans) %}
{% set keywords = keywords~', '~("meta_tag.keyword.dive_center"|trans) %}
{% set keywords = keywords~', '~business.address.location %}
{% set keywords = keywords~', '~business.address.location.region.country %}
{% set keywords = keywords~', '~("meta_tag.keyword.diving_holidays"|trans) %}
{% set keywords = keywords~', '~("meta_tag.keyword.online_booking"|trans) %}
{% for type in business.type %}
    {% set keywords = keywords~', '~type.name %}
{% endfor %}

{% block page_keywords %}{{keywords}}{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/skaphandrusapp/js/plugins/blueimp/jquery.blueimp-gallery.min.js') }}"></script>
    <script src="{{ asset('bundles/skaphandrusapp/js/plugins/peity/jquery.peity.min.js') }}"></script>

    {% if map %}
        <script>
            // Fix bug on Gmap inside tabs
            $('.nav-tabs').on('shown.bs.tab', function () {
                google.maps.event.trigger(window, 'resize', {});
                setTimeout(function () {
            {{ map.javascriptVariable }}.setCenter({{ map.center.javascriptVariable }});
                    }, 100);
                });
        </script>
    {% endif %}

{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('bundles/skaphandrusapp/css/plugins/blueimp/css/blueimp-gallery.min.css') }}">

    <style type="text/css">
        #map_canvas {
            margin-bottom: 25px;
        }
    </style>

{% endblock %}

{% block heading_title %}
    {{ business.name|title }}
{% endblock %}

{% block heading_breadcrumbs %}
    <ol class="breadcrumb" itemprop="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
        <li itemprop="itemListElement"><a href="{{ path('index') }}">{{ "breadcrumb.home"|trans }}</a></li>
        <li itemprop="itemListElement" class="active"><strong>{{ business.name|title }}</strong></li>
    </ol>
{% endblock %}

{% block body %}

    <div class="wrapper wrapper-content" itemscope itemtype="http://schema.org/ProfilePage">
        <div class="row animated fadeInRight">
            <!-- Left Column -->
            <div class="col-md-4">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>{{ "page.business.h5.detail"|trans }}</h5>
                    </div>
                    <div>
                        <div class="ibox-content no-padding border-left-right">
                            <img itemprop="image" alt="{{ business.name }}" class="img-responsive" src="{{ business.getWebPath | imagine_filter('sk_widen_590') }}" />
                        </div>
                        <div class="ibox-content profile-content">
                            <h4><strong>{{ business.name|title }}</strong></h4>
                            <h5>{{ "page.business.h5.founded_at"|trans }}: {{ business.foundedAt|date("d-M-Y") }}</h5>
                            <br/>
                            <h4>{{ "page.business.h4.address"|trans }}</h4>
                            <h5>{{ "page.business.h5.address_postcode"|trans }}</h5>
                            <p>{{ business.address.postcode }}</p>
                            <h5>{{ "page.business.h5.address_province"|trans }}</h5>
                            <p>{{ business.address.province }}</p>
                            <h5>{{ "page.business.h5.address_street"|trans }}</h5>
                            <p>{{ business.address.street }}</p>
                            <h5>{{ "page.business.h5.address_location"|trans }}</h5>
                            <p>{{ business.address.location }}</p>
                            <br/>
                            <h4>{{ "page.business.h4.contact"|trans }}</h4>
                            <h5>{{ "page.business.h5.contact_email"|trans }}</h5>
                            <p>{{ business.contact.email }}</p>
                            <h5>{{ "page.business.h5.contact_fax"|trans }}</h5>
                            <p>{{ business.contact.fax }}</p>
                            <h5>{{ "page.business.h5.contact_homepage"|trans }}</h5>
                            <p>{{ business.contact.homepage }}</p>
                            <h5>{{ "page.business.h5.contact_mobilephone"|trans }}</h5>
                            <p>{{ business.contact.mobilephone }}</p>
                            <h5>{{ "page.business.h5.contact_phone"|trans }}</h5>
                            <p>{{ business.contact.phone }}</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Left Column -->
            <!-- Right Column -->
            <div class="col-md-8">
                <div class="ibox-title">
                    <h5>{{ "page.business.h5.related_contents"|trans }}</h5>
                    {#<div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i class="fa fa-wrench"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li><a href="#">Config option 1</a>
                            </li>
                            <li><a href="#">Config option 2</a>
                            </li>
                        </ul>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>#}
                </div>
                <div class="ibox float-e-margins">
                    <div class="ibox-content">
                        <h1>{% trans with {'%business%': business.name|title, '%location%': business.address.location, '%country%': business.address.location.region.country} %}page.business.h1.title{% endtrans %}</h1>
                        <!-- Start Panel -->
                        <!-- Se for premium -->
                        {% if business.premiumAt != null %}
                            <div class="panel">
                                <div class="panel-heading">
                                    <!--<div class="panel-title m-b-md"><h4>Blank Panel with text tabs</h4></div>-->
                                    <div class="panel-options">
                                        <ul class="nav nav-tabs">
                                            <li class="active"><a data-toggle="tab" href="#tab-1">{{ "page.business.tab.info"|trans }}</a></li>
                                            <li><a data-toggle="tab" href="#tab-2">{{ "page.business.tab.dive"|trans }}</a></li>
                                            <li><a data-toggle="tab" href="#tab-3">{{ "page.business.tab.education"|trans }}</a></li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="panel-body">
                                    <div class="tab-content">
                                        <div id="tab-1" class="tab-pane active">
                                            {% include 'SkaphandrusAppBundle:Default:business-info-commom.html.twig' %}
                                        </div>

                                        <div id="tab-2" class="tab-pane">
                                            <h3>{% trans with {'%business%': business.name} %}page.business.h3.dive{% endtrans %}</h3>
                                            <br/>

                                            <!-- Dive Price -->
                                            <h4>{{ "page.business.h4.dive_price"|trans }}</h4>
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                        <th>{{ "page.dive_price.table.number_of_dives"|trans }}</th>
                                                        <th>{{ "page.dive_price.table.value_per_dives"|trans }}</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for dive in business.divePrice %}
                                                        <tr>
                                                            <td>{{ dive.numberofdives }} 
                                                                {% if dive.numberofdives < 10 %}
                                                                    {{ "label.dive"|trans }}
                                                                {% else %}
                                                                    {{ "label.dives"|trans }}
                                                                {% endif %}
                                                            </td>
                                                            <td>{{ dive.valueperdives }} {{ business.unit.currency }}</td>
                                                        </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>

                                            <!-- Rent Equipment -->
                                            <h4>{{ "page.business.h4.rent_equipment"|trans }}</h4>
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                        <th>{{ "page.rent_equipment.table.equipment_type"|trans }}</th>
                                                        <th>{{ "page.rent_equipment.table.quantity"|trans }}</th>
                                                        <th>{{ "page.rent_equipment.table.rent_value"|trans }}</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for equipment in business.rentEquipment %}
                                                        <tr>
                                                            <td>{{ equipment.equipmentType }}</td>
                                                            <td>{{ equipment.quantity }} {{ "label.unit"|trans }}</td>
                                                            <td>{{ equipment.rentValue }} {{ business.unit.currency }}</td>
                                                        </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>

                                            <!-- Dive Access -->
                                            <h4>{{ "page.business.h4.dive_access"|trans }}</h4>
                                            <table class="table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>{{ "page.dive_access.table.value"|trans }}</th>
                                                        <th>{{ "page.dive_access.table.action"|trans }}</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>{{ "page.dive_access.table.day_dive_boat"|trans }}</td>
                                                        {% if business.diveAccess.dayDiveBoat == true %}
                                                            <td>
                                                                <i class="fa fa-check text-navy"></i>
                                                            </td>
                                                        {% else %}
                                                            <td>
                                                                <i class="fa fa-times text-danger"></i>
                                                            </td>
                                                        {% endif %}
                                                    </tr>
                                                    <tr>
                                                        <td>{{ "page.dive_access.table.shore_dive"|trans }}</td>
                                                        {% if business.diveAccess.shoreDive == true %}
                                                            <td>
                                                                <i class="fa fa-check text-navy"></i>
                                                            </td>
                                                        {% else %}
                                                            <td>
                                                                <i class="fa fa-times text-danger"></i>
                                                            </td>
                                                        {% endif %}
                                                    </tr>
                                                    <tr>
                                                        <td>{{ "page.dive_access.table.night_dive"|trans }}</td>
                                                        {% if business.diveAccess.nightDive == true %}
                                                            <td>
                                                                <i class="fa fa-check text-navy"></i>
                                                            </td>
                                                        {% else %}
                                                            <td>
                                                                <i class="fa fa-times text-danger"></i>
                                                            </td>
                                                        {% endif %}
                                                    </tr>
                                                    <tr>
                                                        <td>{{ "page.dive_access.table.house_reef"|trans }}</td>
                                                        {% if business.diveAccess.houseReef == true %}
                                                            <td>
                                                                <i class="fa fa-check text-navy"></i>
                                                            </td>
                                                        {% else %}
                                                            <td>
                                                                <i class="fa fa-times text-danger"></i>
                                                            </td>
                                                        {% endif %}
                                                    </tr>
                                                    <tr>
                                                        <td>{{ "page.dive_access.table.day_tours"|trans }}</td>
                                                        {% if business.diveAccess.dayTours == true %}
                                                            <td>
                                                                <i class="fa fa-check text-navy"></i>
                                                            </td>
                                                        {% else %}
                                                            <td>
                                                                <i class="fa fa-times text-danger"></i>
                                                            </td>
                                                        {% endif %}
                                                    </tr>
                                                    <tr>
                                                        <td>{{ "page.dive_access.table.half_day_tours"|trans }}</td>
                                                        {% if business.diveAccess.halfDayTours == true %}
                                                            <td>
                                                                <i class="fa fa-check text-navy"></i>
                                                            </td>
                                                        {% else %}
                                                            <td>
                                                                <i class="fa fa-times text-danger"></i>
                                                            </td>
                                                        {% endif %}
                                                    </tr>
                                                    <tr>
                                                        <td>{{ "page.dive_access.table.unguided_dives"|trans }}</td>
                                                        {% if business.diveAccess.unguidedDives == true %}
                                                            <td>
                                                                <i class="fa fa-check text-navy"></i>
                                                            </td>
                                                        {% else %}
                                                            <td>
                                                                <i class="fa fa-times text-danger"></i>
                                                            </td>
                                                        {% endif %}
                                                    </tr>
                                                    <tr>
                                                        <td>{{ "page.dive_access.table.per_day_dives"|trans }}</td>
                                                        <td>{{ business.diveAccess.perDayDives }} {{ "label.dives_per_day"|trans }}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>{{ "page.dive_access.table.max_depth_dives"|trans }}</td>
                                                        <td>{{ business.diveAccess.maxDepthDives }} {{ "label.meters"|trans }}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>{{ "page.dive_access.table.max_minutes_dives"|trans }}</td>
                                                        <td>{{ business.diveAccess.maxminutesdives }} {{ "label.minutes"|trans }}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>{{ "page.dive_access.table.max_persons_per_dive"|trans }}</td>
                                                        <td>{{ business.diveAccess.maxpersonsperdive }} {{ "label.persons"|trans }}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>{{ "page.dive_access.table.observations"|trans }}</td>
                                                        <td>{{ business.diveAccess.observations }}</td>
                                                    </tr>
                                                </tbody>
                                            </table>

                                            <!-- Gas -->
                                            <h4>{{ "page.business.h4.gas"|trans }}</h4>
                                            <table class="table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>{{ "page.gas.table.value"|trans }}</th>
                                                        <th>{{ "page.gas.table.action"|trans }}</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            {{ "page.gas.table.atmospheric_air"|trans }}
                                                        </td>
                                                        {% if business.gas.atmosphericAir == true %}
                                                            <td>
                                                                <i class="fa fa-check text-navy"></i>
                                                            </td>
                                                        {% else %}
                                                            <td>
                                                                <i class="fa fa-times text-danger"></i>
                                                            </td>
                                                        {% endif %}
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            {{ "page.gas.table.nitrox"|trans }}
                                                        </td>
                                                        {% if business.gas.nitrox == true %}
                                                            <td>
                                                                <i class="fa fa-check text-navy"></i>
                                                            </td>
                                                        {% else %}
                                                            <td>
                                                                <i class="fa fa-times text-danger"></i>
                                                            </td>
                                                        {% endif %}
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            {{ "page.gas.table.trimix"|trans }}
                                                        </td>
                                                        {% if business.gas.trimix == true %}
                                                            <td>
                                                                <i class="fa fa-check text-navy"></i>
                                                            </td>
                                                        {% else %}
                                                            <td>
                                                                <i class="fa fa-times text-danger"></i>
                                                            </td>
                                                        {% endif %}
                                                    </tr>
                                                </tbody>
                                            </table>

                                            <!-- Safety -->
                                            <h4>{{ "page.business.h4.safety"|trans }}</h4>
                                            <table class="table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>{{ "page.safety.table.value"|trans }}</th>
                                                        <th>{{ "page.safety.table.action"|trans }}</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            {{ "page.safety.table.oxigen"|trans }}
                                                        </td>
                                                        {% if business.safety.oxigen == true %}
                                                            <td>
                                                                <i class="fa fa-check text-navy"></i>
                                                            </td>
                                                        {% else %}
                                                            <td>
                                                                <i class="fa fa-times text-danger"></i>
                                                            </td>
                                                        {% endif %}
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            {{ "page.safety.table.first_aid_kit"|trans }}
                                                        </td>
                                                        {% if business.safety.firstAidKit == true %}
                                                            <td>
                                                                <i class="fa fa-check text-navy"></i>
                                                            </td>
                                                        {% else %}
                                                            <td>
                                                                <i class="fa fa-times text-danger"></i>
                                                            </td>
                                                        {% endif %}
                                                    </tr>
                                                    <tr>
                                                        <td>{{ "page.safety.table.hours_to_hospital"|trans }}</td>
                                                        <td>{{ business.safety.hourstohospital|date('H:i') }}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>{{ "page.safety.table.hours_to_deco_chamber"|trans }}</td>
                                                        <td>{{ business.safety.hourstodecochamber|date('H:i') }}</td>
                                                    </tr>
                                                </tbody>
                                            </table>

                                        </div>

                                        <div id="tab-3" class="tab-pane">
                                            <h3>{% trans with {'%business%': business.name} %}page.business.h3.education{% endtrans %}</h3>
                                            <br/>

                                            <!-- Education Counditions -->
                                            <h4>{{ "page.business.h4.education_counditions"|trans }}</h4>
                                            <table class="table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>{{ "page.education_counditions.table.value"|trans }}</th>
                                                        <th>{{ "page.education_counditions.table.action"|trans }}</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            {{ "page.education_counditions.table.swimming_pool"|trans }}
                                                        </td>
                                                        {% if business.educationConditions.swimmingPool == true %}
                                                            <td>
                                                                <i class="fa fa-check text-navy"></i>
                                                            </td>
                                                        {% else %}
                                                            <td>
                                                                <i class="fa fa-times text-danger"></i>
                                                            </td>
                                                        {% endif %}
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            {{ "page.education_counditions.table.separate_classroom"|trans }}
                                                        </td>
                                                        {% if business.educationConditions.separateClassroom == true %}
                                                            <td>
                                                                <i class="fa fa-check text-navy"></i>
                                                            </td>
                                                        {% else %}
                                                            <td>
                                                                <i class="fa fa-times text-danger"></i>
                                                            </td>
                                                        {% endif %}
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            {{ "page.education_counditions.table.single_education"|trans }}
                                                        </td>
                                                        {% if business.educationConditions.singleEducation == true %}
                                                            <td>
                                                                <i class="fa fa-check text-navy"></i>
                                                            </td>
                                                        {% else %}
                                                            <td>
                                                                <i class="fa fa-times text-danger"></i>
                                                            </td>
                                                        {% endif %}
                                                    </tr>
                                                    <tr>
                                                        <td>{{ "page.education_counditions.table.max_group_size"|trans }}</td>
                                                        <td>{{ business.educationConditions.maxGroupSize }} {{ "label.persons"|trans }}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>{{ "page.education_counditions.table.observations"|trans }}</td>
                                                        <td>{{ business.educationConditions.observations }}</td>
                                                    </tr>
                                                </tbody>
                                            </table>

                                            <!-- Education Course -->
                                            <h4>{{ "page.business.h4.education_course"|trans }}</h4>
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                        <th>{{ "page.education_course.table.value"|trans }}</th>
                                                        <th>{{ "page.education_course.table.action"|trans }}</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for course in business.educationCourse %}
                                                        <tr>
                                                            <td>{{ "page.education_course.table.course"|trans }}</td>
                                                            <td>{{ course.course.name }}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>{{ "page.education_course.table.price"|trans }}</td>
                                                            <td>{{ course.price }} {{ business.unit.currency }}</td>
                                                        </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Se nao for premium -->
                        {% else %}
                            <br/>
                            {% include 'SkaphandrusAppBundle:Default:business-info-commom.html.twig' %}
                        {% endif %}
                        <!-- End Panel -->
                    </div>
                </div>
            </div>
            <!-- End Right Column -->
        </div>
    </div>


{% endblock %}
